trigger:
- main
pool:
  vmImage: ubuntu-latest
steps:
- task: UseDotNet@2
  inputs:
    packageType: 'sdk'
    version: '8.0.x'
- script: |
    if ls **/*.csproj 1> /dev/null 2>&1; then dotnet build -c Release; fi
  displayName: Build
- script: |
    if ls **/*.csproj 1> /dev/null 2>&1; then dotnet test -c Release --no-build; fi
  displayName: Tests
- script: pip install semgrep && semgrep ci
  displayName: SAST